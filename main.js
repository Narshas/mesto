(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function n(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var o=function(){function t(e){var r=this,o=e.cardData,i=e.cardTemplate,u=e.userId,a=e.handleCardClick,c=e.handleDeleteClick,l=e.handleLikeClick,s=e.handleRemoveLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"deleteCard",(function(){r._element.remove()})),n(this,"_setEventListeners",(function(){r._buttonLike.addEventListener("click",(function(){r._buttonLike.classList.contains("elements__like-button_active")?r._handleRemoveLike(r._cardData):r._handleLikeClick(r._cardData)})),r._trashButton.addEventListener("click",(function(){r._handleDeleteClick(r,r._cardData)})),r._cardImage.addEventListener("click",(function(){r._handleCardClick(r._cardData)}))})),this._templateSelector=i.content,this._handleCardClick=a,this._cardData=o,this._userId=u,this._handleDeleteClick=c,this._handleLikeClick=l,this._handleRemoveLike=s,this._likes=o.likes}var r,o;return r=t,(o=[{key:"setLikes",value:function(t){this._likes=t.likes,this._buttonLike.classList.toggle("elements__like-button_active"),this._likeCounter.textContent=this._likes.length}},{key:"_doIlike",value:function(){var t=this;this._likes.forEach((function(e){e._id===t._userId&&t._buttonLike.classList.add("elements__like-button_active")}))}},{key:"generateElement",value:function(){return this._element=this._templateSelector.cloneNode(!0).children[0],this._cardImage=this._element.querySelector(".elements__image"),this._buttonLike=this._element.querySelector(".elements__like-button"),this._trashButton=this._element.querySelector(".elements__trash-button"),this._likeCounter=this._element.querySelector(".elements__like-counter"),this._element.querySelector(".elements__title").textContent=this._cardData.name,this._cardImage.src=this._cardData.link,this._cardImage.alt=this._cardData.name,this._cardData.owner._id!==this._userId&&this._trashButton.remove(),this._doIlike(),this._likeCounter.textContent=this._likes.length,this._setEventListeners(),this._element}}])&&e(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}var l=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"_enableButton",(function(){r._submitElement.removeAttribute("disabled"),r._submitElement.classList.remove(r._validationOptions.disabledButtonClass)})),a(this,"_disableButton",(function(){r._submitElement.setAttribute("disabled",!0),r._submitElement.classList.add(r._validationOptions.disabledButtonClass)})),a(this,"_toggleButtonState",(function(){r._form.checkValidity()?r._enableButton(r._submitElement):r._disableButton(r._submitElement)})),a(this,"_showError",(function(t,e){var n=r._form.querySelector(".popup__input-error_".concat(t.id));t.classList.add(r._validationOptions.inputInvalidClass),n.textContent=e,n.classList.add(r._validationOptions.inputErrorClass)})),a(this,"_hideError",(function(t){var e=r._form.querySelector(".popup__input-error_".concat(t.id));t.classList.remove(r._validationOptions.inputInvalidClass),e.textContent="",e.classList.remove(r._validationOptions.inputErrorClass)})),a(this,"_toggleInputState",(function(t){t.validity.valid?r._hideError(t):r._showError(t,t.validationMessage)})),a(this,"_stopSubmit",(function(t){t.preventDefault()})),a(this,"_setEventListeners",(function(){r._form.addEventListener=r._stopSubmit,r._inputList.forEach((function(t){t.addEventListener("input",(function(){r._toggleInputState(t),r._toggleButtonState()}))}))})),a(this,"cleanValidation",(function(){r._cleanInputErrors(),r._toggleButtonState()})),a(this,"_cleanInputErrors",(function(){r._inputList.forEach((function(t){r._hideError(t)}))})),this._validationOptions=e,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._validationOptions.inputSelector)),this._submitElement=this._form.querySelector(this._validationOptions.submitSelector)}var e,n;return e=t,(n=[{key:"enableValidation",value:function(){this._setEventListeners()}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===s(e)?e:String(e)}var b=p((function t(e,n){var r=this,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"renderItem",(function(t){t.forEach((function(t){r._renderer(t)}))})),y(this,"addItem",(function(t){r._elementsList.prepend(t)})),this._renderer=o,this._elementsList=document.querySelector(n)}));function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var v=function(){function t(e){var n=e.userNameSelector,r=e.userAboutSelector,o=e.userAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(n),this._userAbout=document.querySelector(r),this._userAvatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent}}},{key:"setUserInfo",value:function(t){this._userName.textContent=t.name,this._userAbout.textContent=t.about}},{key:"setAvatar",value:function(t){this._userAvatar.src=t.avatar}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_active")||e.target.classList.contains("popup__close"))&&t.close()}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._cardImage=e._popup.querySelector(".popup__image"),e._cardTitle=e._popup.querySelector(".popup__caption"),e}return e=u,(n=[{key:"open",value:function(t){E(j(u.prototype),"open",this).call(this),this._cardTitle.textContent=t.name,this._cardImage.alt=t.name,this._cardImage.src=t.link}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(g);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(r);if(o){var n=T(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputList=Array.from(n._form.querySelectorAll(".popup__input")),n._submit=n._popup.querySelector(".popup__submit"),n._submitText=n._submit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),console.log("инпутЛистВал",t),t}},{key:"setEventListeners",value:function(){var t=this;I(T(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){I(T(u.prototype),"close",this).call(this),this._form.reset()}},{key:"showLoading",value:function(t){this._submit.textContent=t?"Cохрание ...":this._submitText}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(g);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}var x=new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_testRes",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return t._testRes(e)}))}},{key:"getDefoltElements",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return t._testRes(e)}))}},{key:"postNewCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._testRes(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t._id),{method:"DELETE",headers:this._headers}).then((function(t){return e._testRes(t)}))}},{key:"patchUserInfo",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return e._testRes(t)}))}},{key:"addlike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._testRes(t)}))}},{key:"removeLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._testRes(t)}))}},{key:"patchAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatarurl})}).then((function(t){return e._testRes(t)}))}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-64",headers:{authorization:"6891c063-8435-431b-87d5-a0d9903b0e56","Content-Type":"application/json"}});function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},N.apply(this,arguments)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(r);if(o){var n=F(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=e.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formDelete=n._popup.querySelector(".popup__form_delete"),n._handleFormSubmit=r,n}return e=u,(n=[{key:"open",value:function(t,e){N(F(u.prototype),"open",this).call(this),this._cardData=e,this._element=t}},{key:"setEventListeners",value:function(){var t=this;N(F(u.prototype),"setEventListeners",this).call(this),this._formDelete.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._element,t._cardData)}))}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(g);function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var H,M=document.querySelector(".profile__edit-button"),$=document.querySelector(".popup_profile"),G=$.querySelector("#username-input"),K=$.querySelector("#about-input"),Q=document.querySelector(".profile__add-button"),W=document.querySelector("#user-card"),X=document.querySelector(".profile__avatar"),Y={};Promise.all([x.getDefoltElements(),x.getUserInfo()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];H=i._id,tt.setUserInfo(i),tt.setAvatar(i),ct.renderItem(o)})).catch((function(t){console.log(t)}));var Z,tt=new v({userNameSelector:".profile__name",userAboutSelector:".profile__about",userAvatarSelector:".profile__avatar"}),et=function(t){ut.open(t)},nt=function(t){var e=new o({cardData:t,cardTemplate:W,userId:H,handleCardClick:et,handleDeleteClick:function(t,e){at.open(t,e)},handleLikeClick:function(t){console.log(t._id),x.addlike(t._id).then((function(t){e.setLikes(t)})).catch((function(t){console.log(t)}))},handleRemoveLike:function(t){console.log(t._id),x.removeLike(t._id).then((function(t){e.setLikes(t)})).catch((function(t){console.log(t)}))}});return e.generateElement()},rt=new D(".popup_profile",(function(t){var e={name:t.profilename,about:t.profileabout};rt.showLoading(!0),x.patchUserInfo(e).then((function(t){tt.setUserInfo(t),rt.close()})).catch((function(t){console.log(t)})).finally((function(){rt.showLoading(!1)}))})),ot=new D(".popup_place",(function(t){var e={name:t.placetext,link:t.placeurl};ot.showLoading(!0),x.postNewCard(e).then((function(t){ct.addItem(nt(t)),ot.close()})).catch((function(t){console.log(t)})).finally((function(){ot.showLoading(!1)}))})),it=new D(".popup_avatar",(function(t){it.showLoading(!0),x.patchAvatar(t).then((function(t){tt.setAvatar(t),it.close()})).catch((function(t){console.log(t)})).finally((function(){it.showLoading(!1)}))})),ut=new L(".popup_zoom"),at=new J(".popup_delete",{handleFormSubmit:function(t,e){x.deleteCard(e).then((function(){t.deleteCard(),at.close()})).catch((function(t){console.log(t)}))}}),ct=new b({renderer:function(t){ct.addItem(nt(t))}},".elements__list");Q.addEventListener("click",(function(){ot.open(),Y.place.cleanValidation()})),M.addEventListener("click",(function(){rt.open();var t=tt.getUserInfo();G.value=t.name,K.value=t.about,Y.profile__info.cleanValidation()})),X.addEventListener("click",(function(){it.open(),Y.avatar.cleanValidation()})),rt.setEventListeners(),ot.setEventListeners(),ut.setEventListeners(),at.setEventListeners(),it.setEventListeners(),Z={formSelector:".popup__form",submitSelector:".popup__submit",inputSelector:".popup__input",disabledButtonClass:"popup__submit_inactive",inputInvalidClass:"popup__input_invalid",inputErrorSelector:".popup__input-error",inputErrorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(Z.formSelector)).forEach((function(t){var e=new l(Z,t),n=t.getAttribute("name");Y[n]=e,e.enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL0NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoeyBjYXJkRGF0YSwgY2FyZFRlbXBsYXRlLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlUmVtb3ZlTGlrZSB9KSB7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSBjYXJkVGVtcGxhdGUuY29udGVudDtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgICAgICB0aGlzLl9jYXJkRGF0YSA9IGNhcmREYXRhO1xuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSA9IGhhbmRsZVJlbW92ZUxpa2U7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gY2FyZERhdGEubGlrZXM7XG4gICAgfVxuXG4gICAgc2V0TGlrZXMoY2FyZERhdGEpIHtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5saWtlcztcbiAgICAgICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIF9kb0lsaWtlKCkge1xuICAgICAgICB0aGlzLl9saWtlcy5mb3JFYWNoKGxpa2UgPT4ge1xuICAgICAgICAgICAgaWYgKGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRzX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUVsZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yLmNsb25lTm9kZSh0cnVlKS5jaGlsZHJlblswXTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2ltYWdlJyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZS1idXR0b24nKTtcbiAgICAgICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fdHJhc2gtYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2UtY291bnRlcicpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZERhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2NhcmREYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9jYXJkRGF0YS5uYW1lO1xuXG4gICAgICAgIGlmICh0aGlzLl9jYXJkRGF0YS5vd25lci5faWQgIT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5fdHJhc2hCdXR0b24ucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kb0lsaWtlKCk7XG4gICAgICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cblxuICAgIGRlbGV0ZUNhcmQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlKHRoaXMuX2NhcmREYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2NhcmREYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcywgdGhpcy5fY2FyZERhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2NhcmREYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uT3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvbk9wdGlvbnMgPSB2YWxpZGF0aW9uT3B0aW9ucztcbiAgICAgICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0aW9uT3B0aW9ucy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdmFsaWRhdGlvbk9wdGlvbnMuc3VibWl0U2VsZWN0b3IpO1xuICAgIH1cblxuICAgIF9lbmFibGVCdXR0b24gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICB0aGlzLl9zdWJtaXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbk9wdGlvbnMuZGlzYWJsZWRCdXR0b25DbGFzcyk7XG4gICAgfTtcblxuICAgIF9kaXNhYmxlQnV0dG9uID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9zdWJtaXRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgdGhpcy5fc3VibWl0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25PcHRpb25zLmRpc2FibGVkQnV0dG9uQ2xhc3MpO1xuICAgIH07XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1Jc1ZhbGlkID0gdGhpcy5fZm9ybS5jaGVja1ZhbGlkaXR5KCk7XG5cbiAgICAgICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVCdXR0b24odGhpcy5fc3VibWl0RWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKHRoaXMuX3N1Ym1pdEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9zaG93RXJyb3IgPSAoaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uTWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC5wb3B1cF9faW5wdXQtZXJyb3JfJHtpbnB1dEVsZW1lbnQuaWR9YCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25PcHRpb25zLmlucHV0SW52YWxpZENsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gdmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25PcHRpb25zLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgfTtcblxuICAgIF9oaWRlRXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLnBvcHVwX19pbnB1dC1lcnJvcl8ke2lucHV0RWxlbWVudC5pZH1gKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbk9wdGlvbnMuaW5wdXRJbnZhbGlkQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbk9wdGlvbnMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB9O1xuXG4gICAgX3RvZ2dsZUlucHV0U3RhdGUgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc3RvcFN1Ym1pdCA9IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lciA9ICgnc3VibWl0JywgdGhpcy5fc3RvcFN1Ym1pdCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRTdGF0ZShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNsZWFuVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2xlYW5JbnB1dEVycm9ycygpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH07XG5cblxuICAgIF9jbGVhbklucHV0RXJyb3JzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBlbGVtZW50c0xpc3RTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9lbGVtZW50c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRzTGlzdFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkSXRlbSA9IChpdGVtKSA9PiB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRzTGlzdC5wcmVwZW5kKGl0ZW0pO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgdXNlck5hbWVTZWxlY3RvciwgdXNlckFib3V0U2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fdXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQWJvdXRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xuICAgIH1cblxuICAgIHNldEF2YXRhcih1c2VyRGF0YSkge1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhclxuICAgIH1cblxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9hY3RpdmUnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfYWN0aXZlJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnXG4vL9C90LAg0LLRhdC+0LQg0LzRiyDRgdGO0LTQsCDQv9C10YDQtdC00LDQtdC8INCy0LXRgdGMINC80LDRgdGB0LjQsiDQtNCw0L3QvdGL0YUg0L4g0LrQsNGA0YLQvtGH0LrQtSBjYXJkRGF0YSDigJQg0L3QsNC00L4g0Y3RgtC+INGD0YfQtdGB0YLRjFxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3RvcilcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgICAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcbiAgICB9XG5cbiAgICBvcGVuKGNhcmREYXRhKSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSBjYXJkRGF0YS5saW5rO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpKTtcbiAgICAgICAgdGhpcy5fc3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQnKTtcbiAgICAgICAgdGhpcy5fc3VibWl0VGV4dCA9IHRoaXMuX3N1Ym1pdC50ZXh0Q29udGVudDtcbiAgICAgICAgLy90aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gdGhpcy5faGFuZGxlRm9ybVN1Ym1pdC5iaW5kKHRoaXMpXG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dExpc3RWYWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgaW5wdXRMaXN0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygn0LjQvdC/0YPRgtCb0LjRgdGC0JLQsNC7JywgaW5wdXRMaXN0VmFsdWVzKVxuICAgICAgICByZXR1cm4gaW5wdXRMaXN0VmFsdWVzO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG5cbiAgICBzaG93TG9hZGluZyhzdGlsbExvYWRpbmcpIHtcbiAgICAgICAgaWYgKHN0aWxsTG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0LnRleHRDb250ZW50ID0gJ0PQvtGF0YDQsNC90LjQtSAuLi4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0LnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0VGV4dDtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBzZXR0aW5ncy5iYXNlVXJsO1xuICAgICAgICB0aGlzLl9oZWFkZXJzID0gc2V0dGluZ3MuaGVhZGVycztcbiAgICB9XG5cbiAgICBfdGVzdFJlcyhyZXMpIHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fdGVzdFJlcyhyZXMpKVxuICAgIH1cblxuICAgIGdldERlZm9sdEVsZW1lbnRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl90ZXN0UmVzKHJlcykpXG4gICAgfVxuXG4gICAgcG9zdE5ld0NhcmQoY2FyZEluZm8pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGNhcmRJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgbGluazogY2FyZEluZm8ubGlua1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl90ZXN0UmVzKHJlcykpXG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZChjYXJkRGF0YSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkRGF0YS5faWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fdGVzdFJlcyhyZXMpKVxuICAgIH1cblxuICAgIHBhdGNoVXNlckluZm8odXNlckRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl90ZXN0UmVzKHJlcykpXG4gICAgfVxuXG4gICAgYWRkbGlrZShjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fdGVzdFJlcyhyZXMpKVxuICAgIH1cblxuICAgIHJlbW92ZUxpa2UoY2FyZElkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX3Rlc3RSZXMocmVzKSlcbiAgICB9XG5cbiAgICBwYXRjaEF2YXRhcihhdmF0YXJEYXRhKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGF2YXRhcjogYXZhdGFyRGF0YS5hdmF0YXJ1cmxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fdGVzdFJlcyhyZXMpKVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICAgIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTY0JyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246ICc2ODkxYzA2My04NDM1LTQzMWItODdkNS1hMGQ5OTAzYjBlNTYnLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxufSkiLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG4gICAgICAgIHRoaXMuX2Zvcm1EZWxldGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fZGVsZXRlJylcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXRcbiAgICB9XG5cbiAgICBvcGVuKGNhcmRFbGVtZW50LCBjYXJkRGF0YSkge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIHRoaXMuX2NhcmREYXRhID0gY2FyZERhdGE7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBjYXJkRWxlbWVudDtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGVEZWxldGUoZGVsZXRlRnVuY3Rpb24pIHtcbiAgICAvLyAgICAgdGhpcy5faGFuZGxlRGVsZXRlID0gZGVsZXRlRnVuY3Rpb247XG4gICAgLy8gfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcbiAgICAgICAgdGhpcy5fZm9ybURlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZWxlbWVudCwgdGhpcy5fY2FyZERhdGEpO1xuICAgICAgICB9KVxuICAgIH1cblxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IHsgVmFsaWRhdGlvbk9wdGlvbnMgfSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhEZWxldGUgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzJztcblxuY29uc3QgYnV0dG9uUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3Byb2ZpbGUnKTtcbmNvbnN0IG5hbWVJbnB1dCA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcjdXNlcm5hbWUtaW5wdXQnKTtcbmNvbnN0IGpvYklucHV0ID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJyNhYm91dC1pbnB1dCcpO1xuY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1jYXJkJyk7XG5jb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xubGV0IHVzZXJJZDtcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblByb21pc2UuYWxsKFthcGkuZ2V0RGVmb2x0RWxlbWVudHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxuICAgIC50aGVuKChbY2FyZHNEYXRhLCB1c2VyRGF0YV0pID0+IHtcbiAgICAgICAgdXNlcklkID0gdXNlckRhdGEuX2lkXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKVxuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXIodXNlckRhdGEpXG4gICAgICAgIGNyZWF0ZVNlY3Rpb24ucmVuZGVySXRlbShjYXJkc0RhdGEpXG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgdXNlck5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcbiAgICB1c2VyQWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19hYm91dCcsXG4gICAgdXNlckF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcbn0pXG5cbi8qIC0tLS0gKi9cbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKHByb2ZpbGVJbmZvKSA9PiB7XG4gICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICAgIG5hbWU6IHByb2ZpbGVJbmZvLnByb2ZpbGVuYW1lLFxuICAgICAgICBhYm91dDogcHJvZmlsZUluZm8ucHJvZmlsZWFib3V0XG4gICAgfVxuICAgIGVkaXRQcm9maWxlLnNob3dMb2FkaW5nKHRydWUpO1xuICAgIGFwaS5wYXRjaFVzZXJJbmZvKHVzZXJEYXRhKVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcbiAgICAgICAgICAgIGVkaXRQcm9maWxlLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgZWRpdFByb2ZpbGUuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9KVxufTtcblxuY29uc3QgaGFuZGxlUGxhY2VGb3JtU3VibWl0ID0gKHBsYWNlSW5mbykgPT4ge1xuICAgIGNvbnN0IGZpZWxkRm9ybSA9IHtcbiAgICAgICAgbmFtZTogcGxhY2VJbmZvLnBsYWNldGV4dCxcbiAgICAgICAgbGluazogcGxhY2VJbmZvLnBsYWNldXJsXG4gICAgfVxuICAgIGFkZFBsYWNlUG9wdXAuc2hvd0xvYWRpbmcodHJ1ZSlcbiAgICBhcGkucG9zdE5ld0NhcmQoZmllbGRGb3JtKVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgY3JlYXRlU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XG4gICAgICAgICAgICBhZGRQbGFjZVBvcHVwLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgYWRkUGxhY2VQb3B1cC5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0pXG59O1xuXG5jb25zdCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0ID0gKGF2YXRhckRhdGEpID0+IHtcbiAgICBjaGFuZ2VBdmF0YXIuc2hvd0xvYWRpbmcodHJ1ZSlcbiAgICBhcGkucGF0Y2hBdmF0YXIoYXZhdGFyRGF0YSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMpO1xuICAgICAgICAgICAgY2hhbmdlQXZhdGFyLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgY2hhbmdlQXZhdGFyLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSlcbn07XG5cbmNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChjYXJkRGF0YSkgPT4ge1xuICAgIG9wZW5ab29tLm9wZW4oY2FyZERhdGEpO1xufTtcblxuY29uc3QgZWRpdFBvcHVwUHJvZmlsZSA9ICgpID0+IHtcbiAgICBlZGl0UHJvZmlsZS5vcGVuKCk7XG4gICAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAgIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLm5hbWU7XG4gICAgam9iSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5hYm91dDtcbiAgICBmb3JtVmFsaWRhdG9yc1sncHJvZmlsZV9faW5mbyddLmNsZWFuVmFsaWRhdGlvbigpO1xufTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoe1xuICAgICAgICBjYXJkRGF0YSxcbiAgICAgICAgY2FyZFRlbXBsYXRlLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkRWxlbWVudCwgY2FyZERhdGEpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKGNhcmRFbGVtZW50LCBjYXJkRGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmREYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjYXJkRGF0YS5faWQpXG4gICAgICAgICAgICBhcGkuYWRkbGlrZShjYXJkRGF0YS5faWQpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuc2V0TGlrZXMocmVzKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlUmVtb3ZlTGlrZTogKGNhcmREYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjYXJkRGF0YS5faWQpXG4gICAgICAgICAgICBhcGkucmVtb3ZlTGlrZShjYXJkRGF0YS5faWQpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuc2V0TGlrZXMocmVzKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjYXJkRWxlbWVudC5nZW5lcmF0ZUVsZW1lbnQoKTtcbn07XG5cbmNvbnN0IGVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9wcm9maWxlJywgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuY29uc3QgYWRkUGxhY2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfcGxhY2UnLCBoYW5kbGVQbGFjZUZvcm1TdWJtaXQpO1xuY29uc3QgY2hhbmdlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9hdmF0YXInLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcbmNvbnN0IG9wZW5ab29tID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfem9vbScpO1xuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aERlbGV0ZSgnLnBvcHVwX2RlbGV0ZScsIHtcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoY2FyZEVsZW1lbnQsIGNhcmREYXRhKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmREYXRhKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50LmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICB9XG59KTtcblxuXG5jb25zdCBjcmVhdGVTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjcmVhdGVTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfVxufSwgJy5lbGVtZW50c19fbGlzdCdcbik7XG5cbi8qIC0tLS0gKi9cblxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBhZGRQbGFjZVBvcHVwLm9wZW4oKTtcbiAgICBmb3JtVmFsaWRhdG9yc1sncGxhY2UnXS5jbGVhblZhbGlkYXRpb24oKTtcbn0pO1xuYnV0dG9uUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRQb3B1cFByb2ZpbGUpO1xuYnV0dG9uQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNoYW5nZUF2YXRhci5vcGVuKCk7XG4gICAgZm9ybVZhbGlkYXRvcnNbJ2F2YXRhciddLmNsZWFuVmFsaWRhdGlvbigpO1xufSk7XG5cbmVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRQbGFjZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5vcGVuWm9vbS5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jaGFuZ2VBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogLS0tLS0tLS0tLS0tLSDQktCw0LvQuNC00LDRhtC40Y8gLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKFZhbGlkYXRpb25PcHRpb25zKSA9PiB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoVmFsaWRhdGlvbk9wdGlvbnMuZm9ybVNlbGVjdG9yKSlcbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihWYWxpZGF0aW9uT3B0aW9ucywgZm9ybUVsZW1lbnQpXG4gICAgICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJylcblxuICAgICAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gICAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKFZhbGlkYXRpb25PcHRpb25zKTtcbi8qIC0tLS0tLS0tLS0tLS0gLS0tLS0tLS0tLS0tLSAqL1xuXG5cbiIsImV4cG9ydCBjb25zdCBEZWZvbHRFbGVtZW50cyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbiAgICB9XG5dO1xuXG5leHBvcnQgY29uc3QgVmFsaWRhdGlvbk9wdGlvbnMgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgICBzdWJtaXRTZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0JyxcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gICAgZGlzYWJsZWRCdXR0b25DbGFzczogJ3BvcHVwX19zdWJtaXRfaW5hY3RpdmUnLFxuICAgIGlucHV0SW52YWxpZENsYXNzOiAncG9wdXBfX2lucHV0X2ludmFsaWQnLFxuICAgIGlucHV0RXJyb3JTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQtZXJyb3InLFxuICAgIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufTsiXSwibmFtZXMiOlsiQ2FyZCIsIl9yZWYiLCJfdGhpcyIsImNhcmREYXRhIiwiY2FyZFRlbXBsYXRlIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVSZW1vdmVMaWtlIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2RlZmluZVByb3BlcnR5IiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJfYnV0dG9uTGlrZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl9oYW5kbGVSZW1vdmVMaWtlIiwiX2NhcmREYXRhIiwiX2hhbmRsZUxpa2VDbGljayIsIl90cmFzaEJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiY29udGVudCIsIl91c2VySWQiLCJfbGlrZXMiLCJsaWtlcyIsImtleSIsInZhbHVlIiwidG9nZ2xlIiwiX2xpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfdGhpczIiLCJmb3JFYWNoIiwibGlrZSIsIl9pZCIsImFkZCIsImNsb25lTm9kZSIsImNoaWxkcmVuIiwicXVlcnlTZWxlY3RvciIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0Iiwib3duZXIiLCJfZG9JbGlrZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uT3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX3N1Ym1pdEVsZW1lbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfdmFsaWRhdGlvbk9wdGlvbnMiLCJkaXNhYmxlZEJ1dHRvbkNsYXNzIiwic2V0QXR0cmlidXRlIiwiX2Zvcm0iLCJjaGVja1ZhbGlkaXR5IiwiX2VuYWJsZUJ1dHRvbiIsIl9kaXNhYmxlQnV0dG9uIiwiaW5wdXRFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImlucHV0SW52YWxpZENsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX3N0b3BTdWJtaXQiLCJfaW5wdXRMaXN0IiwiX3RvZ2dsZUlucHV0U3RhdGUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2xlYW5JbnB1dEVycm9ycyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0U2VsZWN0b3IiLCJTZWN0aW9uIiwiX2NyZWF0ZUNsYXNzIiwiZWxlbWVudHNMaXN0U2VsZWN0b3IiLCJyZW5kZXJlciIsIml0ZW1zIiwiZWxlbWVudCIsIl9yZW5kZXJlciIsIml0ZW0iLCJfZWxlbWVudHNMaXN0IiwicHJlcGVuZCIsImRvY3VtZW50IiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckFib3V0U2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckFib3V0IiwiX3VzZXJBdmF0YXIiLCJhYm91dCIsInVzZXJEYXRhIiwiYXZhdGFyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbG9zZSIsInRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9jYXJkVGl0bGUiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXQiLCJfc3VibWl0VGV4dCIsImlucHV0TGlzdFZhbHVlcyIsImlucHV0IiwiY29uc29sZSIsImxvZyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0Iiwic3RpbGxMb2FkaW5nIiwiYXBpIiwiQXBpIiwic2V0dGluZ3MiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX3Rlc3RSZXMiLCJjYXJkSW5mbyIsIl90aGlzMyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3RoaXM0IiwiX3RoaXM1IiwiY2FyZElkIiwiX3RoaXM2IiwiX3RoaXM3IiwiYXZhdGFyRGF0YSIsIl90aGlzOCIsImF2YXRhcnVybCIsImF1dGhvcml6YXRpb24iLCJQb3B1cFdpdGhEZWxldGUiLCJfZm9ybURlbGV0ZSIsImNhcmRFbGVtZW50IiwiYnV0dG9uUHJvZmlsZSIsInBvcHVwUHJvZmlsZSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiYnV0dG9uQWRkQ2FyZCIsImJ1dHRvbkF2YXRhciIsImZvcm1WYWxpZGF0b3JzIiwiYWxsIiwiZ2V0RGVmb2x0RWxlbWVudHMiLCJnZXRVc2VySW5mbyIsIl9yZWYyIiwiY2FyZHNEYXRhIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsImNyZWF0ZVNlY3Rpb24iLCJyZW5kZXJJdGVtIiwiY2F0Y2giLCJlcnIiLCJWYWxpZGF0aW9uT3B0aW9ucyIsIm9wZW5ab29tIiwib3BlbiIsImNyZWF0ZUNhcmQiLCJkZWxldGVDYXJkUG9wdXAiLCJhZGRsaWtlIiwic2V0TGlrZXMiLCJyZW1vdmVMaWtlIiwiZ2VuZXJhdGVFbGVtZW50IiwiZWRpdFByb2ZpbGUiLCJwcm9maWxlSW5mbyIsInByb2ZpbGVuYW1lIiwicHJvZmlsZWFib3V0Iiwic2hvd0xvYWRpbmciLCJwYXRjaFVzZXJJbmZvIiwiZmluYWxseSIsImFkZFBsYWNlUG9wdXAiLCJwbGFjZUluZm8iLCJmaWVsZEZvcm0iLCJwbGFjZXRleHQiLCJwbGFjZXVybCIsInBvc3ROZXdDYXJkIiwiYWRkSXRlbSIsImNoYW5nZUF2YXRhciIsInBhdGNoQXZhdGFyIiwiZGVsZXRlQ2FyZCIsImNsZWFuVmFsaWRhdGlvbiIsInByb2ZpbGVEYXRhIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dEVycm9yU2VsZWN0b3IiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9